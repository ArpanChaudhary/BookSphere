<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
    <!-- Sidebar Fragment -->
    <nav th:fragment="sidebar(currentPage)" id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse">
        <div class="position-sticky pt-3">
            <!-- User Navigation -->
            <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
                <span>User Menu</span>
            </h6>
            <ul class="nav flex-column">
                <li class="nav-item">
                    <a th:class="${currentPage == 'dashboard' ? 'nav-link active' : 'nav-link'}" th:href="@{/user/dashboard}">
                        <i class="bi bi-house-door me-2"></i> User Dashboard
                    </a>
                </li>
                <li class="nav-item">
                    <a th:class="${currentPage == 'books' ? 'nav-link active' : 'nav-link'}" th:href="@{/books}">
                        <i class="bi bi-book me-2"></i> Browse Books
                    </a>
                </li>
                <li class="nav-item">
                    <a th:class="${currentPage == 'transactions' ? 'nav-link active' : 'nav-link'}" th:href="@{/user/transactions}">
                        <i class="bi bi-arrow-left-right me-2"></i> My Transactions
                    </a>
                </li>
                <li class="nav-item">
                    <a th:class="${currentPage == 'profile' ? 'nav-link active' : 'nav-link'}" th:href="@{/user/profile}">
                        <i class="bi bi-person me-2"></i> Profile
                    </a>
                </li>
                <li class="nav-item">
                    <a th:class="${currentPage == 'notifications' ? 'nav-link active' : 'nav-link'}" th:href="@{/user/notifications}">
                        <i class="bi bi-bell me-2"></i> Notifications
                    </a>
                </li>
            </ul>

            <!-- Author Navigation -->
            <div sec:authorize="hasRole('AUTHOR')">
                <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
                    <span>Author Menu</span>
                </h6>
                <ul class="nav flex-column">
                    <li class="nav-item">
                        <a th:class="${currentPage == 'author-dashboard' ? 'nav-link active' : 'nav-link'}" th:href="@{/author/dashboard}">
                            <i class="bi bi-speedometer2 me-2"></i> Author Dashboard
                        </a>
                    </li>
                    <li class="nav-item">
                        <a th:class="${currentPage == 'author-books' ? 'nav-link active' : 'nav-link'}" th:href="@{/author/books}">
                            <i class="bi bi-journal-text me-2"></i> My Books
                        </a>
                    </li>
                    <li class="nav-item">
                        <a th:class="${currentPage == 'author-statistics' ? 'nav-link active' : 'nav-link'}" th:href="@{/author/statistics}">
                            <i class="bi bi-graph-up me-2"></i> Statistics
                        </a>
                    </li>
                </ul>
            </div>

            <!-- Admin Navigation -->
            <div sec:authorize="hasRole('ADMIN')">
                <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
                    <span>Admin Menu</span>
                </h6>
                <ul class="nav flex-column">
                    <li class="nav-item">
                        <a th:class="${currentPage == 'admin-dashboard' ? 'nav-link active' : 'nav-link'}" th:href="@{/admin/dashboard}">
                            <i class="bi bi-speedometer2 me-2"></i> Admin Dashboard
                        </a>
                    </li>
                    <li class="nav-item">
                        <a th:class="${currentPage == 'admin-users' ? 'nav-link active' : 'nav-link'}" th:href="@{/admin/users}">
                            <i class="bi bi-people me-2"></i> Manage Users
                        </a>
                    </li>
                    <li class="nav-item">
                        <a th:class="${currentPage == 'admin-books' ? 'nav-link active' : 'nav-link'}" th:href="@{/admin/books}">
                            <i class="bi bi-book me-2"></i> Manage Books
                        </a>
                    </li>
                    <li class="nav-item">
                        <a th:class="${currentPage == 'admin-reports' ? 'nav-link active' : 'nav-link'}" th:href="@{/admin/reports}">
                            <i class="bi bi-file-earmark-text me-2"></i> Reports
                        </a>
                    </li>
                </ul>
            </div>

            <!-- System Navigation -->
            <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
                <span>System</span>
            </h6>
            <ul class="nav flex-column mb-2">
                <li class="nav-item">
                    <form th:action="@{/logout}" method="post">
                        <button class="nav-link border-0 bg-transparent" type="submit">
                            <i class="bi bi-box-arrow-right me-2"></i> Logout
                        </button>
                    </form>
                </li>
            </ul>
        </div>
    </nav>
</body>
</html>
